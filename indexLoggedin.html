{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'category/category.css' %}"
    />
    <link
      rel="icon"
      type="image/png"
      href="{% static 'home/logoWhite.png' %}"
    />
    <title>Tokiyo</title>
  </head>
  <body>
    <div class="containerCategory">
      <div class="containerCategoryGradient">
        <div class="navbar_for_category">
          <div class="containerNav">
            <!--  -->
            <button
              class="toggle-button"
              id="logo"
              onclick="toggleElement()"
            ></button>

            <div class="toggle-element" id="toggleElement">
              <a
                href="javascript:void(0);"
                class="contentExit"
                onclick="closeToggleElement()"
                >X</a
              >
              <a class="contentToggle" href="{% url 'home' %}">Home</a>
              <a class="contentToggle" href="{% url 'profile' %}"
                >Personal Details</a
              >
              <a class="contentToggle" href="{% url 'address' %}"
                >Delivery Address</a
              >
              <a class="contentToggle" href="{% url 'viewOrders' %}">Orders</a>
              <a class="contentToggle" href="{% url 'cart' %}">Cart</a>
              <a class="contentToggle" id="cart" href="{% url 'logout' %}"
                >Logout</a
              >
            </div>
            <!--  -->
            <form
              id="search_form"
              method="post"
              action="{% url 'searchInput' %}"
            >
              {% csrf_token %}
              <div class="searchdropdown">
                <div class="searchBar">
                  <input
                    type="text"
                    id="search_here"
                    placeholder="Search..."
                    name="search"
                  />
                </div>
                <div class="suggestionbox" id="box">
                  {% for item in object_list %}
                  <a
                    class="suggestion"
                    href="{% url 'product' prod=item.id %}"
                    value="{{ item.id }}"
                  ></a>
                  {% endfor %}
                </div>
              </div>
            </form>
          </div>
        </div>
        <div class="displayCategory">
          <div class="categoryTitle">{{ category }}</div>
        </div>

        <div class="forProduct">
          <div class="leftSide">
            <button
              class="ctoggle-button"
              id="filter"
              onclick="toggleElementc()"
            ></button>

            <div class="ctoggle-element" id="toggleElementc">
              <a
                href="javascript:void(0);"
                class="contentExitc"
                onclick="closeToggleElementc()"
                >X</a
              >
              <a
                class="contentTogglec"
                href="{% url 'category' category=0 %}"
                value="1"
                >All PRODUCTS</a
              >
              <a
                class="contentTogglec"
                href="{% url 'category' category=1 %}"
                value="1"
                >KATANA</a
              >
              <a
                class="contentTogglec"
                href="{% url 'category' category=2 %}"
                value="2"
                >ACTION FIGURES</a
              >
              <a
                class="contentTogglec"
                href="{% url 'category' category=3 %}"
                value="3"
                >ACCESSORIES</a
              >
              <a
                class="contentTogglec"
                href="{% url 'category' category=4 %}"
                value="4"
                >POSTERS</a
              >
            </div>
          </div>
          {% if products %}
          <div class="rightSide">
            <div class="containerProduct">
              {% for product in products %}
              <a
                href="{% url 'product' prod=product.id %}"
                value="{{ product.id }}"
              >
                <div class="GridGroup">
                  <div class="imgDiv">
                    <img
                      src="../..{{ product.productImage.url }}"
                      alt="{{ product.productName }}"
                    />
                  </div>
                  <div class="titleDiv">{{ product.productName }}</div>
                  <div class="desDiv">{{ product.productDescription }}</div>
                  <div class="sellingPrice">
                    ₹ {{ product.productSellingPrice }}
                  </div>
                  <div class="productPrice">
                    <strike>₹ {{ product.productPrice }}</strike>
                  </div>
                </div>
              </a>
              {% endfor %}
            </div>
            <div class="prevNext">
              <button class="prev">Prev</button>
              <button class="next">Next</button>
            </div>
          </div>
          {% else %}
          <div class="noproductFound">No product found!</div>
          {% endif %}
        </div>
      </div>
    </div>
    <div class="space2">
        <h1 class="qoute2">About Us</h1>
    </div>
    <div class="contactdetails">
        <div class="address">
            No.6,<br>
            Dubai Kuruku Sandhu,<br>
            Dubai Main Road,<br>
            Dubai.
        </div>
        <div class="contact">
            Email   : tokiyo@gmail.com <br>
            Contact : (91) +9677271039
        </div>
    </div>
    <div class="space3">
        <div class="qoute3">© 2023, Tokiyo. </div>
    </div>
  </body>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Comic+Neue:wght@300;700&display=swap");

    body {
      font-family: "Comic Neue", cursive;
      background-repeat: no-repeat;
      margin: 0;
    }
    a {
      text-decoration: none;
    }

    .containerCategory {
      background-image: url("backgroundwallpaper.jpg");
      background-position: top;
      background-repeat: no-repeat;
      background-size: cover;
    }
    .containerCategoryGradient {
      margin: 0;
      background-color: rgb(3, 16, 19, 0.5);
    }
    .displayCategory {
      margin: 1%;
      color: aliceblue;
      text-align: center;
      height: 75px;
    }
    .categoryTitle {
      margin: auto;
      padding: 1%;
      border-radius: 10px;
      font-size: xx-large;
      font-weight: bolder;
      background-color: rgb(3, 16, 19, 1);
    }
    /* for both left and right */
    .forProduct {
      min-height: 100px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    /* left side*/
    .leftSide {
      position: fixed;
      top: 190px;
      z-index: 3;
      margin-left: 20px;
      background-color: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
      color: aliceblue;
      width: 70px;
      height: 70px;
      border-radius: 35px;
      display: flex;
      justify-content: center; /* Center horizontally */
      align-items: center; /* Center vertically */
      transition: 0.3s ease;
    }
    .leftSide:hover {
      background-color: rgba(255, 255, 255, 0.7);
    }

    #filter {
      margin-left: 0;
      background-image: url("filterWhite.png");
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      height: 50px;
      width: 50px;
      transition: 0.3s ease;
    }
    #filter:hover {
      background-image: url("filterRed.png");
    }

    .ctoggle-button {
      background-image: url("logoWhite.png");
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      width: 60px;
      height: 60px;
      background-color: transparent;
      border: none;
      cursor: pointer;
      margin-left: 10%;
    }

    .ctoggle-element {
      border-radius: 35px;
      z-index: 2;
      position: fixed;
      backdrop-filter: blur(5px);
      top: 0;
      left: -220px;
      width: 200px;
      height: 320px;
      background-color: rgba(255, 255, 255, 0.6);
      backdrop-filter: blur(5px);
      overflow: hidden;
      transition: left 0.3s ease;
    }

    .ctoggle-element.show {
      left: 0;
    }

    .contentTogglec,
    .contentExitc {
      color: black;
      font-size: large;
      font-weight: 600;
      height: 50px;
      line-height: 50px;
      text-align: center;
      display: block;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .contentExitc {
      border-radius: 25px;
    }
    .contentTogglec:hover {
      background-color: rgba(0, 0, 0, 0.4);
      color: aliceblue;
      border-radius: none;
    }
    .contentExitc:hover {
      background-color: rgba(255, 0, 0);
      color: aliceblue;
    }

    .ctoggle-element.show .contentTogglec,
    .ctoggle-element.show .contentExitc {
      opacity: 1;
    }

    .contentExitc {
      font-size: x-large;
      background-color: white;
      width: 50px;
      margin: 5% auto;
    }

    /* right side*/
    .rightSide {
      margin-left: 20%;
      background-color: transparent;
      color: aliceblue;
      width: 80%;
    }
    .GridGroup {
      display: inline-block;
      margin: 1%;
      width: 260px;
      height: 510px;
      background-color: rgba(3, 16, 19, 0.7);
      backdrop-filter: blur(5px);
      padding: 1%;
      border-radius: 5px;
    }
    .imgDiv {
      display: flex;
      margin: auto;
      margin-top: 3%;
      height: 350px;
      width: 240px;
    }
    img {
      height: 100%;
      width: 100%;
      object-fit: cover;
      border-radius: 5px;
      transition: 0.3s;
      transition-timing-function: ease;
    }
    img:hover {
      transform: scale(0.95);
    }
    .titleDiv {
      height: 24px;
      overflow: hidden;
      color: aliceblue;
      margin-top: 5%;
      text-align: center;
      font-size: large;
      font-weight: bolder;
    }
    .titleDiv:hover {
      height: 24px;
      overflow: hidden;
      cursor: pointer;
      color: red;
      margin-top: 5%;
      text-align: center;
      font-size: large;
      font-weight: bolder;
    }

    .desDiv {
      padding: 5% 1% 1% 1%;
      height: 60px;
      color: aliceblue;
      font-size: small;
      overflow: hidden;
    }
    .sellingPrice {
      overflow: hidden;
      margin-top: 5%;
      cursor: pointer;
      color: aliceblue;
      font-size: large;
      float: left;
      margin-left: 5%;
      font-weight: bold;
      transition-duration: 0.8s;
    }
    .sellingPrice:hover {
      color: red;
      font-size: larger;
    }
    .productPrice {
      margin-top: 5%;
      width: 100px;
      color: red;
      float: right;
      font-weight: bold;
    }
    .prevNext {
      text-align: center;
      height: 100px;
    }
    .prev,
    .next {
      margin: 3% 1% 0% 1%;
      padding: 1% 3% 1% 3%;
      border-radius: 30px;
      text-decoration: none;
      font-weight: bold;
      font-size: large;
      border: 0;
      background-color: rgb(3, 16, 19, 1);
      color: aliceblue;
      transition-delay: 0.1s;
      transition-duration: 0.3s;
      transition-timing-function: ease;
    }

    .prev:hover,
    .next:hover {
      transform: translateY(-2px);
      font-weight: bold;
      font-size: larger;
      border: 0;
      text-decoration: none;
      color: red;
    }
    .noproductFound {
      float: right;
      margin-right: 40%;
      color: aliceblue;
      font-weight: bold;
      text-align: center;
      padding: 2% 5% 2% 5%;
      background-color: rgba(3, 16, 19, 0.5);
      backdrop-filter: blur(5px);
    }

    /*------*/

    @media (max-width: 768px) {
      * {
        font-size: medium;
      }
      .leftSide {
        height: 50px;
        width: 50px;
      }
      #filter {
        height: 30px;
        width: 30px;
      }
      .ctoggle-element {
        border-radius: 25px;
      }
    }
    @import url("https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,400;1,300&display=swap");

    * {
      box-sizing: border-box;
      font-family: "Rubik", sans-serif;
    }

    a {
      text-decoration: none;
    }

    body {
      margin: 0;
    }

    .containerNav {
      background-color: rgb(3, 16, 19);
      height: 90px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 5%;
    }

    .toggle-button {
      background-image: url("logoWhite.png");
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      width: 60px;
      height: 60px;
      background-color: transparent;
      border: none;
      cursor: pointer;
      margin-left: 10%;
    }

    .toggle-element {
      z-index: 10;
      position: fixed;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100vh;
      background-color: rgba(255, 255, 255, 0.4);
      backdrop-filter: blur(5px);
      overflow: hidden;
      transition: left 0.3s ease;
    }

    .toggle-element.show {
      left: 0;
    }

    .contentToggle,
    .contentExit {
      color: black;
      font-size: large;
      font-weight: 600;
      height: 50px;
      line-height: 50px;
      text-align: center;
      display: block;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .contentExit {
      border-radius: 25px;
    }
    .contentToggle:hover {
      background-color: rgba(0, 0, 0, 0.4);
      color: aliceblue;
      border-radius: none;
    }
    .contentExit:hover {
      background-color: rgba(255, 0, 0);
      color: aliceblue;
    }

    .toggle-element.show .contentToggle,
    .toggle-element.show .contentExit {
      opacity: 1;
    }

    .contentExit {
      font-size: x-large;
      background-color: white;
      width: 50px;
      margin: 5% auto;
    }

    #search_form {
      margin-right: 10%;
      display: flex;
      justify-content: center;
      width: 60%;
    }

    .searchdropdown {
      width: 100%;
    }

    .searchBar {
      width: 100%;
    }

    input {
      padding: 10px 45px 10px 30px;
      width: 100%;
      max-width: 445px;
      height: 50px;
      border: 0;
      border-radius: 25px;
      font-size: medium;
    }

    input:focus {
      outline: none;
    }

    .suggestionbox {
      background-color: rgba(240, 248, 255, 0.5);
      border-radius: 20px;
      z-index: 1;
      position: absolute;
      width: 100%;
      max-width: 445px;
    }

    .suggestion {
      border-radius: 20px;
      text-decoration: none;
      color: rgb(3, 16, 19);
      width: 100%;
      padding: 2%;
      display: block;
      background-color: rgba(240, 248, 255, 0.6);
      border-bottom: 2px solid aliceblue;
    }

    .suggestion:hover {
      color: red;
      background-color: rgba(3, 16, 19, 0.7);
    }

    .no-results {
      border-radius: 20px;
      text-decoration: none;
      color: rgb(3, 16, 19);
      width: 100%;
      padding: 2%;
      display: block;
      background-color: rgba(240, 248, 255, 0.6);
      border-bottom: 2px solid aliceblue;
    }
    #cart {
      color: red;
    }

    /* Media Queries */
    @media (max-width: 1200px) {
      #search_form {
        width: 60%;
        margin-right: 10%;
      }
    }

    @media (max-width: 768px) {
      .containerNav {
        height: 70px;
      }
      #search_form {
        width: 70%;
      }
      .toggle-button {
        margin-left: 1%;
      }
      .suggestionbox {
        width: 60%;
      }
      .suggestion {
        width: 100%;
      }
    }

    @media (max-width: 480px) {
      .toggle-button {
        width: 50px;
        height: 50px;
      }

      .contentToggle,
      .contentExit {
        font-size: medium;
      }

      input {
        width: calc(100% - 20px);
      }

      .suggestion,
      .no-results {
        width: calc(100% - 20px);
      }
    }
    /* footer */
    body {
            font-family: 'Comic Neue', cursive;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        .space2 {
            background-color: rgb(3, 16, 19, 1);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2% 0;
        }
        .qoute2 {
            color: aliceblue;
        }
        .contactdetails {
            background-color: rgb(3, 16, 19, 1);
            display: flex;
            justify-content: space-between;
            padding: 2% 5%;
        }
        .address {
            color: aliceblue;
            background-color: rgb(3, 16, 19, 1);
            padding: 1%;
            margin: 1%;
        }
        .contact {
            color: aliceblue;
            background-color: rgb(3, 16, 19, 1);
            padding: 1%;
            margin: 1%;
        }
        .space3 {
            background-color: rgb(3, 16, 19, 1);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2% 0;
        }
        .qoute3 {
            color: aliceblue;
        }
  </style>
  <script>
    const cards = document.querySelectorAll(".GridGroup");
    const prev = document.querySelector(".prev");
    const next = document.querySelector(".next");
    const prevNextContainer = document.querySelector(".prevNext");

    const cardsPerPage = 9;
    let currentPage = 1;

    function showPage(page) {
      const startIndex = (page - 1) * cardsPerPage;
      const endIndex = startIndex + cardsPerPage;

      cards.forEach((card, index) => {
        if (index >= startIndex && index < endIndex) {
          card.style.display = "inline-block";
        } else {
          card.style.display = "none";
        }
      });

      // Show/Hide buttons based on the number of products and current page
      prev.style.display = currentPage > 1 ? "inline-block" : "none";
      next.style.display =
        currentPage < Math.ceil(cards.length / cardsPerPage)
          ? "inline-block"
          : "none";
    }

    // Initial check to show/hide buttons
    if (cards.length <= cardsPerPage) {
      prevNextContainer.style.display = "none";
    }

    showPage(currentPage);

    prev.addEventListener("click", () => {
      if (currentPage > 1) {
        currentPage--;
        showPage(currentPage);
      }
    });

    next.addEventListener("click", () => {
      const totalPages = Math.ceil(cards.length / cardsPerPage);
      if (currentPage < totalPages) {
        currentPage++;
        showPage(currentPage);
      }
    });

    function toggleElementc() {
      var element = document.getElementById("toggleElementc");
      element.classList.toggle("show");
    }

    function closeToggleElementc() {
      var element = document.getElementById("toggleElementc");
      element.classList.remove("show");
    }
    document.addEventListener("click", function (event) {
      var isClickInside =
        document.getElementById("filter").contains(event.target) ||
        document.getElementById("toggleElementc").contains(event.target);

      if (!isClickInside) {
        closeToggleElementc();
      }
    });
    const data = "{{ qs_json|safe }}";
    const rdata = JSON.parse(data);
    const input = document.getElementById("search_here");
    let filterArr = [];
    input.addEventListener("input", (e) => {
      box.innerHTML = "";
      const inputValue = e.target.value.toLowerCase();
      filterArr = rdata.filter((product) =>
        product.productName.toLowerCase().includes(inputValue)
      );
      if (filterArr.length > 0) {
        filterArr.forEach((item) => {
          const suggestionLink = document.createElement("a");
          suggestionLink.className = "suggestion";
          const itemId = rdata.find(
            (product) => product.productName === item.productName
          )?.id;
          if (itemId !== undefined) {
            const productUrl = '{% url "product" prod=0 %}'.replace(
              "0",
              itemId
            );
            suggestionLink.href = productUrl;
            suggestionLink.textContent = item.productName;
            suggestionLink.addEventListener("click", () =>
              navigateToProduct(itemId)
            );
            box.appendChild(suggestionLink);
          }
        });
      } else {
        box.innerHTML = "<b class='no-results'>No Results found...</b>";
      }
    });
    // Event listener to close suggestion box when clicking outside
    document.addEventListener("click", (e) => {
      if (!input.contains(e.target) && !box.contains(e.target)) {
        box.innerHTML = "";
      }
    });
    function navigateToProduct(itemId) {
      window.location.href = '{% url "product" prod=0 %}'.replace("0", itemId);
    }

    function toggleElement() {
      var element = document.getElementById("toggleElement");
      element.classList.toggle("show");
    }

    function closeToggleElement() {
      var element = document.getElementById("toggleElement");
      element.classList.remove("show");
    }
  </script>
</html>
